<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Absensi</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- HEADER / NAVBAR -->
    <header class="navbar">
      <div class="logo">
        <img src="aset/logoBemFooter.png" alt="Logo BEM" />
        <h2>Sekretariat BEM</h2>
      </div>
      <button class="nav-toggle" id="navToggle">â˜°</button>
      <nav id="navMenu">
        <a href="index.html">Beranda</a>
        <a href="absensi.html" class="active">Absensi</a>
        <a href="input-surat.html">Input Surat</a>
        <a href="rekap.html">Rekap</a>
        <a href="anggota.html">Anggota</a>
        <a href="kontak.html">Kontak</a>
<!-- Link Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<a href="#" class="logout-link" onclick="logout()">
  <i class="bi bi-box-arrow-right"></i>
  Logout
</a>
</a>
</a>

      </nav>
    </header>

    <!-- MAIN -->
    <main class="container">
      <!-- Popup Notifikasi -->
      <div id="popupDialog" style="display: none">
        <div class="popup-content">
          <h2>Data berhasil disimpan!</h2>
          <p>Ingin langsung melihat rekap?</p>
          <div class="popup-buttons">
            <button class="yes" onclick="window.location.href='rekap.html'">
              Yes
            </button>
            <button class="no" onclick="closePopup()">No</button>
          </div>
        </div>
      </div>
      <h2 style="margin-bottom: 1.5rem; text-align: center">Form Absensi</h2>
      <form id="formAbsensi">
        <input type="text" id="nama" name="nama" placeholder="Nama" required />

        <div class="form-row">
          <select id="jabatan" name="jabatan" required>
            <option value="">-- Pilih Jabatan --</option>
            <option value="Presma">Presma</option>
            <option value="Wakil Presma">Wakil Presma</option>
            <option value="Sekjen">Sekjen</option>
            <option value="Sekretaris Kementerian">
              Sekretaris Kementerian
            </option>
            <option value="Kementerian Keuangan">Kementerian Keuangan</option>
            <option value="Kementerian Dalam Negeri">
              Kementerian Dalam Negeri
            </option>
            <option value="Kementerian Luar Negeri">
              Kementerian Luar Negeri
            </option>
            <option value="Kementerian PSDM">Kementerian PSDM</option>
            <option value="Kementerian Agama">Kementerian Agama</option>
            <option value="Kementerian Kominfo">Kementerian Kominfo</option>
            <option value="Kementerian Ristek">Kementerian Ristek</option>
          </select>

          <select id="keterangan" name="keterangan" required>
            <option value="">-- Pilih Keterangan --</option>
            <option value="Hadir">Hadir</option>
            <option value="Izin">Izin</option>
            <option value="Sakit">Sakit</option>
            <option value="Alfa">Alfa</option>
          </select>
        </div>

        <input
          type="text"
          id="kegiatan"
          name="kegiatan"
          placeholder="Nama Kegiatan"
          required
        />
        <button type="submit" class="btn-submit">Simpan</button>
      </form>
    </main>
<!-- Modal Konfirmasi Logout -->
<div id="logoutModal" class="modal">
  <div class="modal-content">
    <p>Yakin ingin logout?</p>
    <div class="modal-actions">
      <button class="btn-cancel" onclick="closeLogoutModal()">Batal</button>
      <button class="btn-confirm" onclick="confirmLogout()">Logout</button>
    </div>
  </div>
</div>
    <!-- Tombol hapus semua absensi, hanya muncul di mobile -->

    <!-- SCRIPT -->
    <script>
      
      // Toggle navbar mobile
      document
        .getElementById("navToggle")
        .addEventListener("click", function () {
          document.getElementById("navMenu").classList.toggle("show");
        });

      // Terapkan dark mode jika disimpan di localStorage
      document.addEventListener("DOMContentLoaded", function () {
        const isDark = localStorage.getItem("darkMode") === "true";
        document.body.classList.toggle("dark-mode", isDark);
      });

      // Submit Form Absensi
      document
        .getElementById("formAbsensi")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const data = {
            nama: document.getElementById("nama").value,
            jabatan: document.getElementById("jabatan").value,
            keterangan: document.getElementById("keterangan").value,
            kegiatan: document.getElementById("kegiatan").value,
            tanggal: new Date().toLocaleDateString("id-ID"),
          };

          let dataAbsensi = JSON.parse(localStorage.getItem("absensi")) || [];
          dataAbsensi.push(data);
          localStorage.setItem("absensi", JSON.stringify(dataAbsensi));

          // Tampilkan popup
          document.getElementById("popupDialog").style.display = "flex";
        });

      function redirectToRekap() {
        window.location.href = "rekap.html";
      }

      function closePopup() {
        document.getElementById("popupDialog").style.display = "none";
        document.getElementById("formAbsensi").reset();
      }
        // Fungsi logout
function logout() {
  // Tampilkan modal konfirmasi logout
  document.getElementById("logoutModal").style.display = "flex";
}

function closeLogoutModal() {
  // Tutup modal
  document.getElementById("logoutModal").style.display = "none";
}

function confirmLogout() {
  // Hapus data login dan arahkan ke login
  localStorage.removeItem("currentUser");
  window.location.href = "login.html";
}

    </script>

  </body>
</html>
